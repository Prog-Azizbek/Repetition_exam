using System;
using System.Text;
using System.Text.RegularExpressions;

class Program
{
    // Функция, которая удаляет все предложения, заканчивающиеся на '!' из строки
    static string RemoveExclamationSentences(string input)
    {
        // Создаем регулярное выражение, которое ищет все подстроки, заканчивающиеся на '.', '!' или '?'
        Regex regex = new Regex(@"[^.!?]+[.!?]");

        List<string> sentences = new List<string>();
        
        // Находим все совпадения в строке и добавляем их в список
        foreach (Match match in regex.Matches(input))
        {
            sentences.Add(match.Value);
        }
        // Список предложений в виде массива
        sentences.ToArray();

        // Создаем StringBuilder для хранения результата
        StringBuilder output = new StringBuilder();

        // Перебираем все предложения
        foreach (var sentence in sentences)
        {
            // Если предложение не пустое и не заканчивается на '! '
            if (!string.IsNullOrEmpty(sentence) && !sentence.EndsWith("!"))
            {
                // Добавляем предложение к результату с пробелом 
                output.Append(sentence.Trim() + " ");
            }
        }

        // Возвращаем результат без последнего пробела
        return output.ToString().TrimEnd();
    }

    static void Main(string[] args)
    {
        // Пример входной строки
        //string input = "Иди по моим следам. Они тебя приведут в мой личный элемский сад, к фонтану из янтаря! Я буду тебя ждать там. В таких вот местах и живут! Оттуда нельзя назад, там брошены якоря?";
        string input = "Привет! Хорошо! нет плохо. это плохо?";
        string output = RemoveExclamationSentences(input);
        Console.WriteLine(output);
    }
}


/*
 Regex regex = new Regex(@"[^.!?]+[.!?]");
Это регулярное выражение, которое ищет все подстроки, заканчивающиеся на ‘.’, ‘!’ или ‘?’. Регулярное выражение состоит из следующих элементов:

[^.!?]+ - это класс символов, который означает любой символ, кроме ‘.’, ‘!’ или ‘?’. Знак ^ в начале класса символов означает отрицание. 
Знак + означает повторение одного или более раз. 
То есть, этот элемент ищет любую последовательность символов, которая не содержит знаков препинания, которыми заканчиваются предложения.
[.!?] - это класс символов, который означает любой символ из ‘.’, ‘!’ или ‘?’. 
То есть, этот элемент ищет любой знак препинания, которым заканчивается предложение.
Таким образом, регулярное выражение [^.!?]+[.!?] ищет любое предложение, которое состоит из любых символов, кроме знаков препинания, 
и заканчивается одним из знаков препинания. Например, такие подстроки как “Привет!” или “Как дела?” соответствуют этому регулярному выражению.
*/